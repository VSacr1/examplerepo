version: "3.8"

services:
  flask-app:
    build: . 
    
    container_name: flask-app
    
    ports:
    - target: 5000
      published: 5000
      protocol: "tcp"
  
  nginx: 
    image: nginx:latest 
    
    container_name: nginx 
    
    ports: 
    - target: 80
      published: 80
    
    volumes: 
    - type: bind 
      source: ./nginx.conf
      target: /etc/nginx/nginx.conf
    
    depends_on: 
    - "flask-app"